
class MyIterable implements Iterable {
	class IterableIterator extends Iterator {
		local iterable;
		local crt;

		IterableIterator(iterable) {
			this:iterable = iterable;
			this:crt = 0;
		}

		hasNext() {
			return this:crt < this:iterable:arr:length();
		}

		next() {
			this:crt = this:crt + 1;
			return this:iterable:arr[this:crt - 1];
		}

		remove() {
			throw Exception("Not supported");
		}
	}

	local arr;

	MyIterable() {
		this:arr = [7, 8, 9];
	}

	iterator() {
		return MyIterable:IterableIterator(this);
	}
}

local inst = MyIterable();

local a;
local x = 0;
foreach(a, local b in inst) {
	print('>', x, [a, b]);
	x = x + 1;
}

print('1 ------');
